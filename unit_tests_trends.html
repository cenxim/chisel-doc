<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Unit Test Trends | Chisel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/assets/css/nv.d3.css" rel="stylesheet" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37373893-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Chisel</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#downloads">Downloads</a></li>
              <li><a href="#examples">Examples</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

<div class="span12">
<h1>Build Metrics for Chisel</h1>
<p>code repository at <a href="http://github.com/ucb-bar/chisel">http://github.com/ucb-bar/chisel</a></p>
<h2>Static Style Checker</h2>
<pre class="code">
$ sbt scalastyle
</pre>
<pre id="static-chart">
  <svg style="height: 600px;">
  </svg>
</pre>
<h2>Runtime Analysis</h2>
<pre class="code">
$ sbt scct:test
</pre>
<pre id="dynamic-chart">
  <svg style="height: 600px;">
  </svg>
</pre>
    </div>
<script src="/assets/js/jquery-1.9.1.min.js"></script>
<script src="/assets/js/d3.v3.min.js"></script>
<script src="/assets/js/nv.d3.min.js"></script>
<script type="text/javascript">
function update_chart(compile_data, runtime_data) {
  nv.addGraph(function() {
      var width = 1000, height = 600;//Chart size////

      /* Insures we have actual Date object and not String representations. */
      var values = compile_data[0].values
      for( j=0 ; j < compile_data.length ; ++j ){
          for( i = 0; i < values.length; ++i ) {
              values = compile_data[j].values;
              // http://stackoverflow.com/questions/17165456/invalid-value-for-circle-attribute-cx-nan-using-nvd3-js
              values[i][0] = (new Date(values[i][0])).getTime();
          }
      }
      // get max and min dates - this assumes data is sorted
      var maxDate = values[0][0],
          minDate = values[values.length-2][0];

      var chart = nv.models.lineChart()
          .x(function(d) { return d[0]; })
          .y(function(d) { return d[1]; })
          .clipEdge(true)
          //.showControls(false)
          .forceY([0])
          .width(width).height(height)//Change chart size////;

      chart.xAxis.axisLabel('Date')
           .tickFormat(function(d) {
               return d3.time.format('%x')(new Date(d)); });
      chart.yAxis.showMaxMin(false)
                 .tickFormat(d3.format('f'));

      d3.select('#static-chart svg').datum(compile_data)
         .transition().duration(500)
         .call(chart);

      nv.utils.windowResize(chart.update);

      return chart;
    });

  nv.addGraph(function() {
      var width = 1000, height = 600;//Chart size////

      /* Insures we have actual Date object and not String representations. */
      var values = runtime_data[0].values
      for( j=0 ; j < runtime_data.length ; ++j ){
          for( i = 0; i < values.length; ++i ) {
              values = runtime_data[j].values;
              // http://stackoverflow.com/questions/17165456/invalid-value-for-circle-attribute-cx-nan-using-nvd3-js
              values[i][0] = (new Date(values[i][0])).getTime();
          }
      }
      // get max and min dates - this assumes data is sorted
      var maxDate = values[0][0],
          minDate = values[values.length-2][0];

      var chart = nv.models.lineChart()
          .x(function(d) { return d[0]; })
          .y(function(d) { return d[1]; })
          .clipEdge(true)
          .forceY([1])
          //.showControls(false)
          .width(width).height(height)//Change chart size////;

      chart.xAxis.axisLabel('Date')
           .tickFormat(function(d) {
               return d3.time.format('%x')(new Date(d)); });
      chart.yAxis.showMaxMin(false)
                 .tickFormat(d3.format('.2f'));

      d3.select('#dynamic-chart svg').datum(runtime_data)
         .transition().duration(500)
         .call(chart);

      nv.utils.windowResize(chart.update);

      return chart;
    });
}

(function() {
     update_chart({{compile_data}}, {{runtime_data}})
})();
    </script>
</body>
</html>
